trigger:
  - main

pool:
  vmImage: "windows-latest"

stages:
  - stage: Build
    displayName: "Build do Frontend (Diagnóstico)"
    jobs:
      - job: BuildJob
        displayName: "Job de Build"
        steps:
          # Instala o Node.js
          - task: NodeTool@0
            displayName: "Instalar Node.js"
            inputs:
              versionSpec: "18.x"

          # Compila o Frontend (Angular)
          # A saída detalhada nos dirá exatamente o que está errado.
          - script: |
              cd $(Build.SourcesDirectory)/src/BolaoOnlineAppV5
              npm install
              npm run build --verbose
            displayName: "Compilar Frontend (Angular)"